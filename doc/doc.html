<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <meta http-equiv="content-type" content="text/html; UTF-8"/>
    <title>Projekt IIS</title>
    <style type="text/css">
    	table { border-collapse: collapse; }
    	td, th { border: 1px solid black; padding: 0.3em 0.5em; text-align: left; }
    	dt { font-weight: bold; margin-top: 0.5em; }
    </style>
</head>
<body>

<!-- Zkontrolujte prosím nastavení kódování v hlavičce dokumentu
     podle použitého editoru -->

<h1>Zvířecí útulek</h1> <!-- Nahradte názvem svého zadání -->

<dl>
	<dt>Autori</dt>
	<dd>Andrej Ľupták<!-- Nahraďte skutečným jménem a e-mailem autora a popisem činnosti -->
	    <a href="mailto:xlupta05@stud.fit.vutbr.cz">xlupta05@stud.fit.vutbr.cz</a>
		<ul>
			<li>Založenie a počiatočná inštalácia projektu, vytvorenie databázových migrácií (tabulky), dodatočná validácia pri registácii a úprava ukladania používateľov do databázy</li>
			<li>Prístup autentifikovaných užívateľov k jednotlivým podstránkam za pomoci Middleware</li>
			<li>Stránka pečovatela - zobrazenie zvierat, vytvorenie, editácia a odstraňovanie zvierat, detail jednotlivého zvieraťa, zobrazenie požiadaviek pre venčenie dobrovolníkmi, vytváranie rozvrhov pre venčenie, zobrazenie histórie venčení pre jednotlivé zvieratá, potvrdzovanie prihlasovania na termíny venčení, evidencia zapožičania a vrátenia,			odstránanie termínu venčení, zobrazenie požiadaviek pre overenie dobrovolníkov, potvrdzovanie/odmietanie dobrovolníkov, vytváranie požiadaviek na veterinára, zobrazenie histórie požiadaviek a vykonaných vyšetrení pre jednotlivé zvieratá</li>
			
			<li>Stránka dobrovolníka - história venčení dobrovolníka, zobrazenie voľných termínov venčení, vytvorenie požiadavky pre vypísaný termín venčenia, odhlásenie sa z termínu venčenia</li>
			<li>Dokumentácia, zabezpečenie hostingu, migrácia (do 18.12.2022)</li>
		</ul>
	</dd>
	<dd>Marián Backa<!-- Nahraďte skutečným jménem a e-mailem autora a popisem činnosti -->
	    <a href="mailto:xbacka01@stud.fit.vutbr.cz">xbacka01@stud.fit.vutbr.cz</a>
		<ul>
			<li>Sekcia pre veterinára -Zobrazenie a vybavovanie žiadostí od pečovateľa o vyšetrenie zvierat, archív zdravotných záznamov o každom zvierati v útulku a jeho správa(editácia/mazanie záznamov ktoré nie sú v stave 'done' a vytváranie nových)</li>
			<li>Admin stránka - Správa účtov používateľoch(zmena údajov v tabulke -včetne role), mazanie a vytváranie nových účtov. Správa informácí o zvieratách a ich mazanie</li>
			<li>Domovská stránka a Detail zvieraťa - zobrazenie a filtrácia zvierat v útulku, zobrazenie základných informácí o zvierati po kliknutí na jeho obrázok/meno</li>
			<li>About stránka - základné informácie o útulku</li>
			<li>Dokumentácia</li>
		</ul>
	</dd>
  <dd>Michal Majer<!-- Nahraďte skutečným jménem a e-mailem autora a popisem činnosti -->
	    <a href="mailto:xmajer22@stud.fit.vutbr.cz">xmajer22@stud.fit.vutbr.cz</a>
		<ul>
			<li>Overenie platnosti vstupných údajov pri registrácii (validácia)</li>
			<li>Stránka administrátora - Pridávanie používateľov a zvierat. Overenie platnosti zadaných údajov a ošetrenie chybových stavov. Vyhľadávanie používateľov a zvierat na základe kľúčových slov</li>
			<li>Stránka veterinára - Roztriedenie žiadostí na vyšetrenie zvieraťa podľa ich stavu vybavenia</li>
			<li>Stránka dobrovolníka - Zobrazenie stránky dobrovolníka bez naplánovaných venčení</li>
			<li>Dokumentácia, migrácia</li>
		</ul>
	</dd>
	<dt>URL aplikácie</dt>
	<dd><a href="https://animalshelter.netology.sk/">https://animalshelter.netology.sk/</a></dd>
</dl>

<h2>Uživatelé systému pro testování</h2>
<table>
<tr><th>Login</th><th>Heslo</th><th>Role</th></tr>
<tr><td>admin@animalshelter.sk</td><td>AdminATanimalshelter123</td><td>Administrátor</td></tr>
<tr><td>careman@animalshelter.sk</td><td>CaremanATanimalshelter123</td><td>Ošetrovateľ</td></tr>
<tr><td>vet@animalshelter.sk</td><td>VetATanimalshelter123</td><td>Vetarinár</td></tr>
<tr><td>volunteer@animalshelter.sk</td><td>VolunteerATanimalshelter123</td><td>Dobrovolník</td></tr>
<tr><td>anothervolunteer@animalshelter.sk</td><td>AnotherATanimalshelter123</td><td>Dobrovolník</td></tr>
</table>

<h3>Video</h3>

<p>Přiložte odkaz na komentované video demostrující použití informačního systému. Zaměřte se na případy užití definované zadáním (např. registrace uživatele, správa uživatelů a činnosti jednotlivých rolí). Video nahrajte například na VUT Google Drive, kde ho bude možné přímo spustit z odkazu.</p>

<h2>Implementácia</h2>

<h3>BackEnd</h3>
<p>Ako implementačný jazyk sme si vybrali Laravell 9.x. spolu s php.</p>

<h3>FrontEnd</h3>
<p>Stránky sú implementované najmä za pomoci jednoduchého Bootstrap doplnenom o php a základným html.</p>

<h3>Popis implementácie</h3>
<p>Projekt je implementovaný podľa modelu MVC.</p>
<p>Súbory s príponami .blade.php predstavujúce časť View. V týchto súboroch sa nacházajú konktétne zobrazenia stránok. Jednotlivé stránky sú výstižne pomenované podľa toho, čo konkrétne majú zobrazovť.</p>
<p>Časť Model predstavuje prácu s databázou. Tu sa nachádzajú čisto operácie, ktoré je nutné vykonať nad databázou. Ide o dotazy ako napríklad select, delete, update a ďalšie. Súbory je možné nájsť 	v zložek App\Models. Každý model je pomenový podľa tabuľky, nad ktorou vykonáva operácie. Jednotlivé metódy modulov sú volané pomocou Controllerov.</p>
<p>Súbory v zložke App\Http\Controllers	predstavujú Controller časť MVC modelu. Tu sa vykonáva všetka komunikácia, spracovanie formulárov a dát medzi View a Model časťou. Controllery sú opäť výstižne pomenované. Napríklad AnimalController.php slúži pre správu zvierat, zatiaľ čo ExaminaionController.php slúži k spracovaniu dát vyšetrení a iné.</p>
<p>Vzhľad a vytvorenie databázy zabezpečujú takzvané migrácie. Pomocou príkazu php artisan migrate, sa zo zložky database\migrations načítajú schémy databázy, pomocou ktorých je databáza vytvorená.</p>
<p>Prístup medzi jednotlivými používateľmi a zabránenie prístupu do sekcie, na ktorú iný používateľ nemá prístup je riešená pomocou rozšírenia Middleware. Ide o rozšírenie, ktoré podľa autentifikovaného používeľa sprístupňuje len určitú časť prístupných ciest. Kontrola autentifuikácie používeľa pri prístupe k určitej ceste prebieha v častiach App\Http\Middleware. Povolené prístupové cesty sú definované pre každú rolu používateľa v súbore routes\web.php. Tento súbor slúži zároveň aj pre rozpoznanie dotazovaného pohľadu podľa linku a vyvolanie konkrétneho kontroleru. Počiatočné presmerovanie po prihlásení používateľa sa nachádza v súbore Http\Controllers\Auth\LoginController.php.</p>

<h3>Databáza</h3>
<h4>Návrh databázy:</h4>
<p>Samotná databáza sa skladá zo štyroch, vzájomne prepojených tabuliek. Ide o tabuľky:</p>
<ul>
	<li>animals - obsahujúca informácie o zviearatách ako je ich meno, druh, farba, informácie o nájdení, vek a iné.</li>
	<li>users - obsahujúca informácie o používateľoch ako je ich meno, priezvisko, prihlasovací email či heslo, rola, status potvrdzovanie pre dobrovolníkov, redundantná informácia o dátume narodenia či veku osoby.</li>
	<li>examinations - tabuľka reprezentuje požiadavky pre vyšetrenia zvierat, informácie o vyšetrení či informácie o tom, ktorý veterinár vyšetrenie vykonal spolu s poznámkami vyšetrenia. Požiadavka vyšetrenia o vykonanom vyšetrení, či naplánovanom vyšetrení je zozlíšená pomocou atribútu <i>examination_type</i>. Tabuľka tak zabezpečuje aj históriu vyšetrení.</li>
	<li>reservations - podobným spôsobom, ako tabuľa examinations reprezentuje jednotlivé vypísané termíny pre venčenie, rezerváciu a históriu venčení zvierat pomocou atribútu <i>reservation_status</i>. Vďaka spojeniu s tabuľkou používateľov tak vieme pre rezervované termíny a vykonané venčenie dodatočne dohľadať, ktorý dobrovolník mal v daný termín zviera požičané, či kým bol určitý termín pre venčenie potvrdený.</li>
</ul>
<dd><a href="https://lucid.app/lucidchart/74c66f4e-f8d2-42ee-8226-2f159ad37ab4/edit?viewport_loc=-4%2C601%2C2136%2C1068%2C0_0&invitationId=inv_1387b3ff-2a73-4042-bebc-ee6d8442832e">ER diagram</a></dd>
<image style="max-width:850px" src="IISv2.svg"></image>

<h2>Inštalácia pre localhost</h2>
<ul>
	<li>Git clone / skopírovanie súborov do zložky projektu</li>
	<li>Inštalácia a spustenie DB serveru, napríklad XAMPP s MariaDB min. verzia 10.4.25</li>
	<li>Vytvoríť súbor .env pre prepojenie s DB systémom. Správne nastavenie parametrov. Ukažkový súbor example.env</li>
	<li>Pomocou PowerShell (Windows) alebo terminálu (Linux) inštalácia php 8.1, composer, node.js min. 16.xx.x</li>
	<li>Inicializácia databázy pomocou príkazu php artisan:migrate</li>
	<li>Prípadné vloženie dummy dát vo forme .sql cez rozhranie phpmyadmin</li>
	<li>V jednom termináli spustiť npm príkazom: npm install & npm run dev</li>
	<li>V druhom termináli spustiť artisan príkazom: php artisan serve</li>
	<li>Prístup ku stránke pomocou localhost, prípadne: http://127.0.0.1:8000/</li>
	<li>Pre možnosť zobrazovania a ukladania obrázkov je dodatočne nutný príkaz: php artisan storage:link</li>
</ul>
<i>Projekt nie je možné spustiť iba z odovzdaných súborov, nakoľko neobsahujú všetky knižnice, dependencies a iné controllery vygenerované a požadované priamo Laravellom.
Rovnako neobsahujú Bootstrap knižnice potrebné pre korektné zobrazenie stránky. Celý projekt je možné po požiadaní zobraziť na <a href="https://github.com/pindo696/IIS_project">GitHub</a>.</i>

<h2>Hosting aplikácie</h2>
Nakoľko sa na školských serveroch nepodarilo rozumne spojazdniť laravel, nodejs ani rozumné prepojenie s databázovým systémom, sme sa rozhodli pre vlastný hosting poskytovaný portálom WebCreators, s.r.o. Na danej platforme bude aplikácia, spolu s databázovým systémom spustená najneskôr 18.12.2022. <a href="https://animalshelter.netology.sk/">Link.</a>

<h2>Známe problémy</h2>
<p>Jednoduchší dizajn - pod 14' sa stráca responzivita stránky.</p>

<h2>Možné obmedzenia</h2>
<p>Na strane veterninára nie je kontrolovaný zadaný dátum vyšetrenia pre prípad, kedy by veterinár potreboval vložiť prehliadnku vykonanú v minulosti.</p>
<p>Pri používatelovi je redundandne zaznamenávaný dátum narodia spolu s vekom. Pri registrácii tieto údaje nie sú požadované avšak admin má možnosť ich doplniť. Vek je vypočítaný dynamicky podľa roku narodenia.</p>
<p>Nie sú riešené kolízie v rozvrhoch. Pečovatel musí sám dohliadnuť na to, aby nevypísal pre rovnaké zviera dva prelínajúce sa termíny.</p>
<p>Zvierací útulok nie je otvorený počas noci, preto vypísané rozvrhy zvierat musia byť v rozmedzí od 6:00 do 18:00, prípadne nasledujúci deň.</p>


</body>
</html>

